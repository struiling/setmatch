<!-- TODO: Add jQuery to make value of checkboxes "n" if unchecked -->


<form method="post" action="<%- '/group/' + group.get('urlName') %>">
	<fieldset>
		<legend>Edit group info</legend>

		<label for="group-name">Name</label>
        <input name="name" id="group-name" type="text" placeholder="Name" value="<%- group.get("name") %>">
        
        <label for="group-urlName">URL</label>
        <input name="urlName" id="group-urlName" type="text" placeholder="URL" value="<%- group.get("urlName") %>">
        
        <label for="description">Description</label>
        <input name="description" id="description" type="textarea" placeholder="Description" value="<%- group.get("description") %>">

        <input type="hidden" name="id" value="<%- group.id %>" />
        <br />
        <!--<input type="hidden" name="secretive" value="n" />
        <input name="secretive" id="secretive" type="checkbox" value="y"<% if (group.get("secretive") == "y") { %> checked="checked"<% } %>> 

        <label for="secretive">Prevent members of this group from viewing other members (not recommended)</label>
        <br />-->
        <input type="hidden" name="_method" value="put" />
        <input class="button" type="submit" value="Save changes" />
	</fieldset>
</form>
<form method="post" action="<%- '/group/' + group.get('urlName') + '/trait' %>">
    <fieldset>
        <legend>Add a new group custom trait</legend>

        <label for="name">Name</label>
        <input name="name" id="name" type="text" placeholder="Name" value="">
        
        <br />
        <label for="type">Type</label>
        <select name="type" id="type">
            <option value="text">Text</option>
            <option value="date">Date</option>
            <option value="location">Location</option>
            <option value="list">Multiple choice</option>
            <option value="list">Checkboxes</option>
        </select>
        <input type="text" name="listoption[]" value="" /> <br />
        <input type="text" name="listoption[]" value="" /> <br />

        <input type="hidden" name="group" value="<%- group.id %>" />
        <br />
        
        <input class="button" type="submit" value="Create group trait" />
    </fieldset>
</form>

<% if (typeof(traits) !== 'undefined' && traits.length > 0) { %>

    <form method="post" action="<%- '/group/' + group.get('urlName') + 'trait' %>">
        <fieldset>
            <legend>Edit group traits</legend>
            <% _.each(traits, function(trait, i) { %>
                <label for="name">Name</label>
                <input name="name" id="name" type="text" placeholder="Name" value="<%= traits[i].get("name") %>">
                <br />
                <label for="type">Type</label>
                <%= traits[i].get("type") %>
                <select name="type" id="type">
                    <option value="text">Text</option>
                    <option value="date">Date</option>
                    <option value="location">Location</option>
                    <option value="list">Multiple choice</option>
                    <option value="list">Checkboxes</option>
                </select>
                <br />
                <input type="hidden" name="id" value="<%= traits[i].id %>" />
            <% } ) %>

            <br />
            
            <input type="hidden" name="_method" value="put" />
            <input class="button" type="submit" value="Save changes">
        </fieldset>
    </form>
<% } %>
<form method="post" action="<%- '/group/' + group.get('urlName') + '/invite' %>">
    <fieldset>
        <legend>Invite members</legend>
        <label for="inviteMembers">Enter email addresses separated by commas</label>
        <br />
        <textarea name="inviteMembers" id="inviteMembers" rows="3"></textarea>
        <input class="button" type="submit" value="Send invitations" />
    </fieldset>
</form>
<h3>Current members</h3>


<p><a href="/group/<%- group.get("urlName") %>">View group</a></p>